(this["webpackJsonpwindmill-dashboard-react"]=this["webpackJsonpwindmill-dashboard-react"]||[]).push([[41],{1320:function(e,a,t){"use strict";t.r(a);var n=t(6),l=t.n(n),c=t(14),r=t(16),s=t(7),o=t(3),m=t(0),u=t.n(m),i=(t(13),t(15),t(12)),p=(t(86),t(87),t(1)),d=t(18),f=t(120),E=(t(92),t(27)),N=t(139),b=t(140),w=t(2);a.default=function(){Object(w.g)();var e=Object(m.useState)(0),a=Object(o.a)(e,2),t=a[0],n=a[1],h=Object(m.useState)(!1),x=Object(o.a)(h,2),g=x[0],v=x[1],O=Object(m.useState)(!1),C=Object(o.a)(O,2),j=C[0],y=C[1],T=Object(m.useState)(!1),S=Object(o.a)(T,2),I=S[0],F=S[1],k=Object(m.useContext)(E.a).setTopHeading,L=Object(m.useState)(!1),M=Object(o.a)(L,2),_=M[0],P=M[1],H=Object(m.useState)(!1),A=Object(o.a)(H,2),G=A[0],B=A[1],W=Object(m.useState)({_id:"",customerName:""}),U=Object(o.a)(W,2),J=U[0],q=U[1],D=Object(m.useState)({_id:"",accountName:""}),R=Object(o.a)(D,2),z=R[0],K=R[1],Q=Object(m.useState)({_id:"",customerName:""}),V=Object(o.a)(Q,2),X=V[0],Y=V[1],Z=Object(m.useState)({username:"",email:"",password:"",confpassword:"",customerName:"",accountId:[],accountName:"",unitId:[],unitName:"",address:"",district:"",state:"",locationType:"",pincode:"",GSTnumber:"",contactPerson:"",contactNo:"",altContact:"",WhatsappNo:""}),$=Object(o.a)(Z,2),ee=$[0],ae=$[1],te=Object(m.useState)({email:"",name:"",enc_password:"",confpassword:""}),ne=Object(o.a)(te,2),le=ne[0],ce=ne[1];Object(m.useEffect)((function(){return k("Add Customer"),function(){k("")}}),[]);var re=function(e){return function(a){ae(Object(s.a)(Object(s.a)({},ee),{},Object(r.a)({},e,a.target.value)))}},se=function(){var e=Object(c.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ee.password===ee.confpassword){e.next=3;break}return ce(Object(s.a)(Object(s.a)({},le),{},{confpassword:"Confirm password does not match"})),e.abrupt("return");case 3:if(!(""===ee.customerName|""===ee.username|""===ee.email|""===ee.password|""===ee.confpassword)){e.next=6;break}return F(!0),e.abrupt("return");case 6:a={username:ee.username,name:ee.customerName,email:ee.email,password:ee.password,role:1,childAccountIds:[],address:ee.address,district:ee.district,state:ee.state,locationType:ee.locationType,pincode:ee.pincode,GSTnumber:ee.GSTnumber,contactPerson:ee.contactPerson,contactNo:ee.contactNo,altContact:ee.altContact,whatsappNo:ee.WhatsappNo,show_password:ee.password},Object(d.c)(a,"customer/".concat(i.a.getId(),"/signup")).then((function(e){console.log("Signed Up",e._id),v(!0),ce({username:"",email:"",customerName:"",enc_password:"",confpassword:""})})).catch((function(e){console.log("err",e),ce(Object(s.a)({},e))}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Object(c.a)(l.a.mark((function e(a){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ee.password===ee.confpassword){e.next=3;break}return ce(Object(s.a)(Object(s.a)({},le),{},{confpassword:"Confirm password does not match"})),e.abrupt("return");case 3:if(!(""===ee.accountName|""===ee.username|""===ee.email|""===ee.password|""===ee.confpassword)){e.next=6;break}return F(!0),e.abrupt("return");case 6:if(""!=X._id){e.next=9;break}return y(!0),e.abrupt("return");case 9:console.log("username",ee.username),t={username:ee.username,name:ee.accountName,email:ee.email,password:ee.password,parentCustomerId:X._id,parentCustomerName:X.customerName,role:2,address:ee.address,district:ee.district,state:ee.state,locationType:ee.locationType,pincode:ee.pincode,GSTnumber:ee.GSTnumber,contactPerson:ee.contactPerson,contactNo:ee.contactNo,altContact:ee.altContact,whatsappNo:ee.WhatsappNo,show_password:ee.password},Object(d.c)(t,"customer/".concat(i.a.getId(),"/signup")).then((function(e){v(!0),console.log("Signed Up",e),ce({username:"",email:"",accountName:"",enc_password:"",confpassword:""})})).catch((function(e){console.log("err",e),ce(Object(s.a)({},e))}));case 12:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),me=function(){var e=Object(c.a)(l.a.mark((function e(a){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=J._id&&""!=z._id){e.next=3;break}return y(!0),e.abrupt("return");case 3:t={username:ee.username,email:ee.email,customerId:J._id,customerName:J.customerMame,accountId:z._id,accountName:z.accountName,unitName:ee.unitName,address:ee.address,district:ee.district,state:ee.state,locationType:ee.locationType,pincode:ee.pincode,GSTnumber:ee.GSTnumber,contactPerson:ee.contactPerson,contactNo:ee.contactNo,altContact:ee.altContact,whatsappNo:ee.WhatsappNo,show_password:ee.password},Object(N.a)(t).then((function(e){console.log("Signed Up",e),v(!0)})).catch((function(e){console.log("err",e)}));case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,u.a.createElement(f.a,{isModalOpen:_,setIsModalOpen:P,setCustomer:Y}),u.a.createElement(b.a,{isModalOpen:G,setIsModalOpen:B,setAccount:K,account:z,customer:J,setCustomer:q}),function(){return u.a.createElement("div",{className:"px-4 py-3 mt-4 mb-8 bg-white rounded-lg shadow-md dark:bg-gray-800"},u.a.createElement(p.Label,{className:"font-bold"},u.a.createElement("span",null,"Add Customer")),u.a.createElement("hr",{className:"mb-5 mt-2"}),u.a.createElement("div",{className:"flex-row flex space-x-3"},u.a.createElement("div",{className:"flex flex-col w-full"},u.a.createElement(p.Label,{className:"w-full"},u.a.createElement("span",null,"Select Account Type*"),u.a.createElement(p.Select,{className:"mt-1",onChange:function(e){n(parseInt(e.target.value))}},u.a.createElement("option",{value:"0"},"Customer"),u.a.createElement("option",{value:"1"},"Account"),u.a.createElement("option",{value:"2"},"Unit")))),0===t?u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"flex flex-col w-full"},u.a.createElement(p.Label,{className:"w-full"},u.a.createElement("span",null,"Customer Name*"),u.a.createElement(p.Input,{className:"mt-1",type:"text",value:ee.customerName,onChange:re("customerName")})),u.a.createElement(p.HelperText,{valid:!1},le.customerName))):null,1===t?u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"flex flex-col w-full"},u.a.createElement(p.Label,{className:"w-full"},u.a.createElement("span",null,"Account Name*"),u.a.createElement(p.Input,{className:"mt-1",type:"text",value:ee.accountName,onChange:re("accountName")})),u.a.createElement(p.HelperText,{valid:!1},le.accountName))):null,2===t?u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"flex flex-col w-full"},u.a.createElement(p.Label,{className:"w-full"},u.a.createElement("span",null,"Unit Name*"),u.a.createElement(p.Input,{className:"mt-1",type:"text",value:ee.unitName,onChange:re("unitName")})))):null,u.a.createElement("div",{className:"flex flex-col w-full"},u.a.createElement(p.Label,{className:"w-full"},u.a.createElement("span",null,"User Name*"),u.a.createElement(p.Input,{className:"mt-1",type:"text",value:ee.username,onChange:re("username")})),u.a.createElement(p.HelperText,{valid:!1},le.username)),u.a.createElement(p.Label,{className:"w-full"},u.a.createElement("span",null,"Email*"),u.a.createElement(p.Input,{className:"mt-1",type:"email",placeholder:"",value:ee.email,onChange:re("email")})),u.a.createElement(p.HelperText,{valid:!1},le.email)),u.a.createElement("div",{className:"flex-row flex space-x-3 "},u.a.createElement(p.Label,{className:"w-full mt-4"},u.a.createElement("span",null,"Password*"),u.a.createElement(p.Input,{className:"mt-1",placeholder:"",type:"password",value:ee.password,onChange:re("password")})),u.a.createElement(p.HelperText,{valid:!1},le.enc_password),u.a.createElement("div",{className:"flex flex-col w-full"},u.a.createElement(p.Label,{className:"w-full mt-4"},u.a.createElement("span",null,"Confirm password*"),u.a.createElement(p.Input,{className:"mt-1",type:"password",value:ee.confpassword,onChange:(e="confpassword",function(a){ae(Object(s.a)(Object(s.a)({},ee),{},Object(r.a)({},e,a.target.value))),ee.password!==a.target.value?ce(Object(s.a)(Object(s.a)({},le),{},{confpassword:"Confirm password does not match"})):ce(Object(s.a)(Object(s.a)({},le),{},{confpassword:""}))})})),u.a.createElement(p.HelperText,{valid:!1},le.confpassword))),u.a.createElement(p.Label,{className:"font-bold mt-5 mb-2"},u.a.createElement("span",null,"Additional Information")),u.a.createElement("hr",null),u.a.createElement("div",{className:"flex-row flex space-x-3 mt-3 mb-2"},u.a.createElement("div",{className:"flex flex-col w-full"},u.a.createElement(p.Label,{className:"w-full"},u.a.createElement("span",null,"GST Number"),u.a.createElement(p.Input,{className:"mt-1",type:"text",value:ee.GSTnumber,onChange:re("GSTnumber")}))," ",15!=ee.GSTnumber.length&&0!=ee.GSTnumber?u.a.createElement(u.a.Fragment,null,u.a.createElement(p.HelperText,{valid:!1},"GST number shound be 15 digits")):null),u.a.createElement("div",{className:"flex flex-col w-full"},u.a.createElement(p.Label,{className:"w-full"},u.a.createElement("span",null,"Contact Person"),u.a.createElement(p.Input,{className:"mt-1",type:"text",value:ee.contactPerson,onChange:re("contactPerson")}))," "),u.a.createElement("div",{className:"flex flex-col w-full"},u.a.createElement(p.Label,{className:"w-full"},u.a.createElement("span",null,"Contact Number"),u.a.createElement(p.Input,{className:"mt-1",type:"number",value:ee.contactNo,onChange:re("contactNo")}))," ",10!=ee.contactNo.length&&0!=ee.contactNo?u.a.createElement(u.a.Fragment,null,u.a.createElement(p.HelperText,{valid:!1},"Phone number shound be 10 digits")):null),u.a.createElement("div",{className:"flex flex-col w-full"},u.a.createElement(p.Label,{className:"w-full"},u.a.createElement("span",null,"Whatsapp Number"),u.a.createElement(p.Input,{className:"mt-1",type:"number",value:ee.WhatsappNo,onChange:re("WhatsappNo")})),10!=ee.WhatsappNo.length&&0!=ee.WhatsappNo?u.a.createElement(u.a.Fragment,null,u.a.createElement(p.HelperText,{valid:!1},"Phone number shound be 10 digits")):null)),u.a.createElement(p.Label,{className:"my-2"},u.a.createElement("span",null,"Address"),u.a.createElement(p.Input,{className:"mt-1",type:"text",value:ee.address,onChange:re("address")}))," ",u.a.createElement("div",{className:"flex-row flex space-x-3 my-2"},u.a.createElement("div",{className:"flex flex-col w-full"},u.a.createElement(p.Label,{className:"w-full"},u.a.createElement("span",null,"District"),u.a.createElement(p.Input,{className:"mt-1",type:"text",value:ee.district,onChange:re("district")}))," "),u.a.createElement("div",{className:"flex flex-col w-full"},u.a.createElement(p.Label,{className:"w-full"},u.a.createElement("span",null,"State"),u.a.createElement(p.Input,{className:"mt-1",type:"text",value:ee.state,onChange:re("state")}))," "),u.a.createElement("div",{className:"flex flex-col w-full"},u.a.createElement(p.Label,{className:"w-full"},u.a.createElement("span",null,"Location Type"),u.a.createElement(p.Input,{className:"mt-1",type:"text",value:ee.locationType,onChange:re("locationType")}))," "),u.a.createElement("div",{className:"flex flex-col w-full"},u.a.createElement(p.Label,{className:"w-full"},u.a.createElement("span",null,"PIN code"),u.a.createElement(p.Input,{className:"mt-1",type:"text",value:ee.pincode,onChange:re("pincode")}))," ",6!=ee.pincode.length&&0!=ee.pincode?u.a.createElement(u.a.Fragment,null,u.a.createElement(p.HelperText,{valid:!1},"PIN shound be 6 digits")):null)),1===t?u.a.createElement(u.a.Fragment,null,u.a.createElement(p.Button,{onClick:function(){return P(!0)},"aria-label":"Notifications","aria-haspopup":"true",className:"mt-4 mr-2"},""===X.customerName?u.a.createElement(u.a.Fragment,null,"Select Associations"):u.a.createElement(u.a.Fragment,null,"Customer: ",X.customerName))):null,2===t?u.a.createElement(u.a.Fragment,null,u.a.createElement(p.Button,{onClick:function(){return B(!0)},"aria-label":"Notifications","aria-haspopup":"true",className:"mt-4 mr-2"},"Select Associations")):null,u.a.createElement(p.Button,{onClick:function(){0===t?se():1===t?oe():me()},"aria-label":"Notifications","aria-haspopup":"true",className:"mt-4"}," ","Create ",0===t&&u.a.createElement(u.a.Fragment,null," Customer ")||1===t&&u.a.createElement(u.a.Fragment,null,"Account")||2==t&&u.a.createElement(u.a.Fragment,null,"Unit")));var e}(),u.a.createElement(u.a.Fragment,null,u.a.createElement(p.Modal,{isOpen:g,onClose:function(){return v(!1)}},u.a.createElement(p.ModalHeader,null,0===t?u.a.createElement(u.a.Fragment,null,"Customer "):null,1===t?u.a.createElement(u.a.Fragment,null,"Account "):null,2===t?u.a.createElement(u.a.Fragment,null,"Unit "):null,"Created Successfully!"),u.a.createElement(p.ModalBody,null),u.a.createElement(p.ModalFooter,null,u.a.createElement(p.Button,{className:"w-full sm:w-auto",onClick:function(){return window.location.reload()}},"Okay!")))),u.a.createElement(u.a.Fragment,null,u.a.createElement(p.Modal,{isOpen:j,onClose:function(){return y(!1)}},u.a.createElement(p.ModalHeader,null,"Customer Not Selected!"),u.a.createElement(p.ModalBody,null),u.a.createElement(p.ModalFooter,null,u.a.createElement(p.Button,{className:"w-full sm:w-auto",onClick:function(){return y(!1)}},"Okay!")))),u.a.createElement(u.a.Fragment,null,u.a.createElement(p.Modal,{isOpen:I,onClose:function(){return F(!1)}},u.a.createElement(p.ModalHeader,null,"Required fields are not filled!"),u.a.createElement(p.ModalBody,null),u.a.createElement(p.ModalFooter,null,u.a.createElement(p.Button,{className:"w-full sm:w-auto",onClick:function(){return F(!1)}},"Okay!")))))}}}]);
//# sourceMappingURL=41.ebfe1802.chunk.js.map